<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOENG - Sistema Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2ecc71;
            --secondary: #3498db;
            --accent: #e74c3c;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: var(--dark);
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            text-align: center;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            font-weight: 600;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .document-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.1);
        }

        .quick-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        .quick-btn {
            padding: 12px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            background: #f8fff9;
            border-color: var(--primary);
        }

        .quick-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), #27ae60);
            color: white;
            padding: 15px 30px;
            border: none;
            cursor: pointer;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--accent), #c0392b);
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }

        /* CRM Styles */
        .crm-container {
            width: 100%;
        }

        .filtros {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .parceiros-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .parceiro-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .parceiro-card:hover {
            transform: translateY(-5px);
        }

        .status-ativo { border-left: 4px solid #2ecc71; }
        .status-pendente { border-left: 4px solid #f39c12; }
        .status-inativo { border-left: 4px solid #e74c3c; }

        .parceiro-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .parceiro-tipo {
            background: #e0e0e0;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .parceiro-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .action-btn:hover {
            background: #f8f9fa;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #7f8c8d;
        }

        /* Document Styles */
        .document-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }

        .document-title {
            font-size: 1.8em;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .document-subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .clause {
            margin-bottom: 25px;
        }

        .clause-title {
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .signature-section {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #e0e0e0;
        }

        .signature-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .signature-field {
            width: 45%;
            text-align: center;
        }

        .signature-line {
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
            margin-bottom: 30px;
        }

        .equipment-list {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .equipment-list th,
        .equipment-list td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .equipment-list th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .maintenance-record {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--secondary);
        }

        .maintenance-date {
            font-weight: bold;
            color: var(--dark);
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .tabs, .btn, .no-print {
                display: none;
            }
            .tab-content {
                display: block !important;
                box-shadow: none;
                padding: 20px;
            }
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            .tab {
                min-width: 100%;
            }
            .filtros {
                grid-template-columns: 1fr;
            }
            .parceiros-grid {
                grid-template-columns: 1fr;
            }
            .quick-options {
                grid-template-columns: 1fr;
            }
            .signature-line {
                flex-direction: column;
            }
            .signature-field {
                width: 100%;
                margin-bottom: 20px;
            }
            .action-buttons {
                flex-direction: column;
            }
            .btn {
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß¥ ECOENG - Sistema Completo</h1>
            <p>Gest√£o Integrada de Coletas, Parceiros e Documentos</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="openTab('coleta')">üìä Registrar Coleta</button>
            <button class="tab" onclick="openTab('parceiros')">üë• Gest√£o de Parceiros</button>
            <button class="tab" onclick="openTab('documentos')">üìã Documentos Legais</button>
            <button class="tab" onclick="openTab('relatorios')">üìà Relat√≥rios</button>
        </div>

        <!-- ABA COLETA -->
        <div id="coleta" class="tab-content active">
            <div class="form-container">
                <h2>üìä Registrar Nova Coleta</h2>
                
                <form id="coletaForm">
                    <div class="form-group">
                        <label>üìç Local de Coleta *</label>
                        <input type="text" id="localColeta" placeholder="Ex: Entrada do bloco B - UVA" required>
                    </div>

                    <div class="form-group">
                        <label>üì¶ Quantidade Aproximada *</label>
                        <div class="quick-options">
                            <button type="button" class="quick-btn" onclick="setQuantidade(15, this)">Pouco (1-20)</button>
                            <button type="button" class="quick-btn" onclick="setQuantidade(35, this)">M√©dio (21-50)</button>
                            <button type="button" class="quick-btn" onclick="setQuantidade(75, this)">Muito (51-100)</button>
                            <button type="button" class="quick-btn" onclick="setQuantidade(120, this)">Muit√≠ssimo (100+)</button>
                        </div>
                        <input type="number" id="quantidade" placeholder="Ou digite o n√∫mero exato" min="1" required>
                    </div>

                    <div class="form-group">
                        <label>üë§ Respons√°vel *</label>
                        <input type="text" id="responsavelColeta" placeholder="Seu nome" required>
                    </div>

                    <div class="form-group">
                        <label>üìù Observa√ß√µes</label>
                        <textarea id="observacoesColeta" rows="3" placeholder="Alguma observa√ß√£o importante?"></textarea>
                    </div>

                    <button type="button" class="btn" onclick="registrarColeta()">‚úÖ Registrar Coleta</button>
                </form>

                <div class="success-message" id="successColeta">
                    üéâ Coleta registrada com sucesso! Obrigado pela contribui√ß√£o!
                </div>

                <div class="form-group" style="margin-top: 30px;">
                    <h3>üìä Coletas Recentes</h3>
                    <div id="lista-coletas" style="max-height: 300px; overflow-y: auto; margin-top: 15px;">
                        <!-- Coletas ser√£o carregadas aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA PARCEIROS -->
        <div id="parceiros" class="tab-content">
            <div class="crm-container">
                <h2>üë• Gest√£o de Parceiros</h2>
                
                <div class="filtros">
                    <div>
                        <label>üîç Buscar parceiro</label>
                        <input type="text" id="search" placeholder="Nome, email ou telefone...">
                    </div>
                    
                    <div>
                        <label>Status</label>
                        <select id="filter-status">
                            <option value="">Todos</option>
                            <option value="ativo">Ativo</option>
                            <option value="pendente">Pendente</option>
                            <option value="inativo">Inativo</option>
                        </select>
                    </div>
                    
                    <div>
                        <label>Tipo</label>
                        <select id="filter-tipo">
                            <option value="">Todos</option>
                            <option value="empresa">Empresa</option>
                            <option value="ong">ONG</option>
                            <option value="comunidade">Comunidade</option>
                            <option value="governo">Governo</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="abrirModalNovoParceiro()">‚ûï Novo Parceiro</button>
                </div>

                <div class="parceiros-grid" id="lista-parceiros">
                    <!-- Parceiros carregados via JavaScript -->
                </div>
            </div>
        </div>

        <!-- ABA DOCUMENTOS -->
        <div id="documentos" class="tab-content">
            <div class="document-container">
                <div class="document-header">
                    <div class="document-title">üìã Documentos Legais - ECOENG</div>
                    <div class="document-subtitle">Termos de Comodato e Gest√£o de Equipamentos</div>
                </div>

                <div class="action-buttons">
                    <button class="btn" onclick="openModalDocumento('comodato')">üìÑ Termo de Comodato</button>
                    <button class="btn btn-secondary" onclick="openModalDocumento('manutencao')">üîß Ficha de Manuten√ß√£o</button>
                    <button class="btn btn-accent" onclick="openModalDocumento('gerador')">üîÑ Gerar Documentos</button>
                </div>

                <div class="clause">
                    <div class="clause-title">Documentos Dispon√≠veis</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 20px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
                            <h4>üìÑ Termo de Comodato</h4>
                            <p>Contrato de empr√©stimo de equipamentos m√©dicos</p>
                            <button class="btn" style="margin-top: 10px; padding: 10px 20px;" onclick="openModalDocumento('comodato')">Abrir</button>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
                            <h4>üîß Ficha de Manuten√ß√£o</h4>
                            <p>Controle de manuten√ß√£o de equipamentos</p>
                            <button class="btn btn-secondary" style="margin-top: 10px; padding: 10px 20px;" onclick="openModalDocumento('manutencao')">Abrir</button>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
                            <h4>üîÑ Gerador</h4>
                            <p>Gerar documentos personalizados</p>
                            <button class="btn btn-accent" style="margin-top: 10px; padding: 10px 20px;" onclick="openModalDocumento('gerador')">Abrir</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA RELAT√ìRIOS -->
        <div id="relatorios" class="tab-content">
            <div class="form-container">
                <h2>üìà Relat√≥rios e Estat√≠sticas</h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                    <div style="background: #e8f5e8; padding: 25px; border-radius: 10px; text-align: center;">
                        <h3>Itens Coletados</h3>
                        <div style="font-size: 2.5em; color: #2ecc71; font-weight: bold;" id="total-coletas">1.464</div>
                        <p>Total geral</p>
                    </div>
                    
                    <div style="background: #e8f4f8; padding: 25px; border-radius: 10px; text-align: center;">
                        <h3>Parceiros Ativos</h3>
                        <div style="font-size: 2.5em; color: #3498db; font-weight: bold;" id="total-parceiros">8</div>
                        <p>Colaboradores</p>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 25px; border-radius: 10px; text-align: center;">
                        <h3>Equipamentos</h3>
                        <div style="font-size: 2.5em; color: #f39c12; font-weight: bold;" id="total-equipamentos">24</div>
                        <p>Dispon√≠veis</p>
                    </div>
                    
                    <div style="background: #f8e8f0; padding: 25px; border-radius: 10px; text-align: center;">
                        <h3>CO‚ÇÇ Evitado</h3>
                        <div style="font-size: 2.5em; color: #e74c3c; font-weight: bold;" id="total-co2">79.93 kg</div>
                        <p>Impacto ambiental</p>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn" onclick="gerarRelatorioMensal()">üìÖ Relat√≥rio Mensal</button>
                    <button class="btn btn-secondary" onclick="exportarDados()">üìä Exportar Dados</button>
                    <button class="btn btn-accent" onclick="window.print()">üñ®Ô∏è Imprimir Relat√≥rio</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL NOVO PARCEIRO -->
    <div id="modalParceiro" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Cadastrar Novo Parceiro</h2>
                <button class="close-btn" onclick="fecharModal('modalParceiro')">√ó</button>
            </div>
            
            <form id="parceiroForm">
                <div class="form-group">
                    <label>Nome da Empresa/Organiza√ß√£o *</label>
                    <input type="text" id="parceiroNome" placeholder="Ex: Empresa ABC Sustent√°vel" required>
                </div>

                <div class="form-group">
                    <label>Tipo de Parceiro *</label>
                    <select id="parceiroTipo" required>
                        <option value="">Selecione...</option>
                        <option value="empresa">Empresa</option>
                        <option value="ong">ONG</option>
                        <option value="comunidade">Comunidade</option>
                        <option value="governo">Governo</option>
                        <option value="educacao">Institui√ß√£o de Ensino</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Pessoa de Contato *</label>
                    <input type="text" id="parceiroContato" placeholder="Nome do respons√°vel" required>
                </div>

                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="parceiroEmail" placeholder="email@exemplo.com" required>
                </div>

                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="parceiroTelefone" placeholder="(21) 99999-9999">
                </div>

                <div class="form-group">
                    <label>Status *</label>
                    <select id="parceiroStatus" required>
                        <option value="ativo">Ativo</option>
                        <option value="pendente">Pendente</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Contribui√ß√£o *</label>
                    <textarea id="parceiroContribuicao" rows="3" placeholder="Ex: Pontos de coleta, recursos financeiros, volunt√°rios..." required></textarea>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="button" class="btn" onclick="salvarParceiro()">üíæ Salvar Parceiro</button>
                    <button type="button" class="btn btn-secondary" onclick="fecharModal('modalParceiro')">‚ùå Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DOCUMENTOS -->
    <div id="modalDocumento" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="modalDocumentoTitulo">Documento</h2>
                <button class="close-btn" onclick="fecharModal('modalDocumento')">√ó</button>
            </div>
            <div id="modalDocumentoConteudo">
                <!-- Conte√∫do do documento ser√° carregado aqui -->
            </div>
        </div>
    </div>

    <script>
        // Dados do sistema
        let coletas = JSON.parse(localStorage.getItem('ecoeng_coletas')) || [];
        let parceiros = JSON.parse(localStorage.getItem('ecoeng_parceiros')) || [
            {
                id: 1,
                nome: "Empresa ABC Sustent√°vel",
                tipo: "empresa",
                contato: "Maria Silva",
                email: "maria@empresaabc.com",
                telefone: "(21) 99999-9999",
                status: "ativo",
                dataCadastro: "15/09/2025",
                contribuicao: "Pontos de coleta + recursos"
            },
            {
                id: 2,
                nome: "ONG Verde Vida",
                tipo: "ong", 
                contato: "Jo√£o Santos",
                email: "joao@verdevida.org",
                telefone: "(21) 98888-8888",
                status: "ativo",
                dataCadastro: "20/09/2025",
                contribuicao: "Volunt√°rios + divulga√ß√£o"
            }
        ];

        // Sistema de Abas
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            if (tabName === 'parceiros') carregarParceiros();
            if (tabName === 'coleta') carregarColetas();
            if (tabName === 'relatorios') atualizarEstatisticas();
        }

        // ========== SISTEMA DE COLETA ==========
        let activeQuickBtn = null;

        function setQuantidade(valor, button) {
            document.getElementById('quantidade').value = valor;
            document.querySelectorAll('.quick-btn').forEach(btn => btn.classList.remove('active'));
            if (button) {
                button.classList.add('active');
                activeQuickBtn = button;
            }
        }

        function registrarColeta() {
            const coleta = {
                id: coletas.length + 1,
                local: document.getElementById('localColeta').value,
                quantidade: parseInt(document.getElementById('quantidade').value),
                responsavel: document.getElementById('responsavelColeta').value,
                observacoes: document.getElementById('observacoesColeta').value,
                data: new Date().toLocaleDateString('pt-BR'),
                timestamp: new Date().getTime()
            };

            if (!coleta.local || !coleta.quantidade || !coleta.responsavel) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }

            coletas.push(coleta);
            localStorage.setItem('ecoeng_coletas', JSON.stringify(coletas));

            document.getElementById('successColeta').style.display = 'block';
            document.getElementById('coletaForm').reset();
            if (activeQuickBtn) {
                activeQuickBtn.classList.remove('active');
                activeQuickBtn = null;
            }

            setTimeout(() => {
                document.getElementById('successColeta').style.display = 'none';
                carregarColetas();
            }, 3000);
        }

        function carregarColetas() {
            const container = document.getElementById('lista-coletas');
            const ultimasColetas = coletas.slice(-5).reverse();
            
            if (ultimasColetas.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #7f8c8d;">Nenhuma coleta registrada ainda.</p>';
                return;
            }

            container.innerHTML = ultimasColetas.map(coleta => `
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #2ecc71;">
                    <strong>${coleta.local}</strong><br>
                    <small>üì¶ ${coleta.quantidade} itens | üë§ ${coleta.responsavel} | üìÖ ${coleta.data}</small>
                    ${coleta.observacoes ? `<br><small>üìù ${coleta.observacoes}</small>` : ''}
                </div>
            `).join('');
        }

        // ========== SISTEMA DE PARCEIROS ==========
        function carregarParceiros() {
            const container = document.getElementById('lista-parceiros');
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const statusFilter = document.getElementById('filter-status').value;
            const tipoFilter = document.getElementById('filter-tipo').value;
            
            const parceirosFiltrados = parceiros.filter(parceiro => {
                const matchSearch = 
                    parceiro.nome.toLowerCase().includes(searchTerm) ||
                    parceiro.contato.toLowerCase().includes(searchTerm) ||
                    parceiro.email.toLowerCase().includes(searchTerm) ||
                    (parceiro.telefone && parceiro.telefone.includes(searchTerm));
                
                const matchStatus = !statusFilter || parceiro.status === statusFilter;
                const matchTipo = !tipoFilter || parceiro.tipo === tipoFilter;
                
                return matchSearch && matchStatus && matchTipo;
            });
            
            if (parceirosFiltrados.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #7f8c8d; grid-column: 1 / -1;">Nenhum parceiro encontrado com os filtros selecionados.</p>';
                return;
            }
            
            container.innerHTML = parceirosFiltrados.map(parceiro => `
                <div class="parceiro-card status-${parceiro.status}">
                    <div class="parceiro-header">
                        <h3 style="flex: 1;">${parceiro.nome}</h3>
                        <span class="parceiro-tipo">${parceiro.tipo}</span>
                    </div>
                    <p><strong>Contato:</strong> ${parceiro.contato}</p>
                    <p><strong>Email:</strong> ${parceiro.email}</p>
                    ${parceiro.telefone ? `<p><strong>Telefone:</strong> ${parceiro.telefone}</p>` : ''}
                    <p><strong>Contribui√ß√£o:</strong> ${parceiro.contribuicao}</p>
                    <p><strong>Status:</strong> ${parceiro.status}</p>
                    <p><strong>Desde:</strong> ${parceiro.dataCadastro}</p>
                    <div class="parceiro-actions">
                        <button class="action-btn" onclick="editarParceiro(${parceiro.id})">‚úèÔ∏è Editar</button>
                        <button class="action-btn" onclick="exportarContato(${parceiro.id})">üìû Contatar</button>
                    </div>
                </div>
            `).join('');
        }

        function abrirModalNovoParceiro() {
            document.getElementById('modalParceiro').style.display = 'flex';
            document.getElementById('parceiroForm').reset();
        }

        function fecharModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function salvarParceiro() {
            const novoParceiro = {
                id: parceiros.length + 1,
                nome: document.getElementById('parceiroNome').value,
                tipo: document.getElementById('parceiroTipo').value,
                contato: document.getElementById('parceiroContato').value,
                email: document.getElementById('parceiroEmail').value,
                telefone: document.getElementById('parceiroTelefone').value,
                status: document.getElementById('parceiroStatus').value,
                dataCadastro: new Date().toLocaleDateString('pt-BR'),
                contribuicao: document.getElementById('parceiroContribuicao').value
            };

            if (!novoParceiro.nome || !novoParceiro.tipo || !novoParceiro.contato || !novoParceiro.email || !novoParceiro.contribuicao) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }

            parceiros.push(novoParceiro);
            localStorage.setItem('ecoeng_parceiros', JSON.stringify(parceiros));
            
            fecharModal('modalParceiro');
            carregarParceiros();
            alert('üéâ Parceiro cadastrado com sucesso!');
        }

        function editarParceiro(id) {
            const parceiro = parceiros.find(p => p.id === id);
            if (parceiro) {
                document.getElementById('parceiroNome').value = parceiro.nome;
                document.getElementById('parceiroTipo').value = parceiro.tipo;
                document.getElementById('parceiroContato').value = parceiro.contato;
                document.getElementById('parceiroEmail').value = parceiro.email;
                document.getElementById('parceiroTelefone').value = parceiro.telefone || '';
                document.getElementById('parceiroStatus').value = parceiro.status;
                document.getElementById('parceiroContribuicao').value = parceiro.contribuicao;
                
                document.getElementById('modalParceiro').style.display = 'flex';
            }
        }

        function exportarContato(id) {
            const parceiro = parceiros.find(p => p.id === id);
            if (parceiro) {
                const vcard = `BEGIN:VCARD
VERSION:3.0
FN:${parceiro.contato}
ORG:${parceiro.nome}
EMAIL:${parceiro.email}
TEL:${parceiro.telefone}
END:VCARD`;
                
                const blob = new Blob([vcard], { type: 'text/vcard' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${parceiro.contato}.vcf`;
                a.click();
            }
        }

        // ========== SISTEMA DE DOCUMENTOS ==========
        function openModalDocumento(tipo) {
            const modal = document.getElementById('modalDocumento');
            const titulo = document.getElementById('modalDocumentoTitulo');
            const conteudo = document.getElementById('modalDocumentoConteudo');
            
            let html = '';
            
            switch(tipo) {
                case 'comodato':
                    titulo.textContent = 'üìÑ Termo de Comodato';
                    html = `
                        <div class="document-header">
                            <div class="document-title">TERMO DE COMODATO</div>
                            <div class="document-subtitle">Empr√©stimo de Equipamentos M√©dicos e Hospitalares</div>
                        </div>
                        <div class="document-body">
                            <div class="clause">
                                <div class="clause-title">CL√ÅUSULA 1¬™ - DO OBJETO</div>
                                <p>O presente instrumento tem por objeto o empr√©stimo gratuito dos equipamentos m√©dicos/hospitalares do Projeto ECOENG.</p>
                            </div>
                            <div class="action-buttons">
                                <button class="btn" onclick="window.print()">üñ®Ô∏è Imprimir</button>
                                <button class="btn btn-secondary" onclick="downloadPDF('comodato')">üì• Baixar PDF</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'manutencao':
                    titulo.textContent = 'üîß Ficha de Manuten√ß√£o';
                    html = `
                        <div class="document-header">
                            <div class="document-title">FICHA DE CONTROLE E MANUTEN√á√ÉO</div>
                            <div class="document-subtitle">Registro de Manuten√ß√£o de Equipamentos</div>
                        </div>
                        <div class="document-body">
                            <div class="clause">
                                <div class="clause-title">CONTROLE DE EQUIPAMENTOS</div>
                                <p>Registro completo de manuten√ß√µes e empr√©stimos dos equipamentos do projeto.</p>
                            </div>
                            <div class="action-buttons">
                                <button class="btn" onclick="window.print()">üñ®Ô∏è Imprimir</button>
                                <button class="btn btn-secondary" onclick="downloadPDF('manutencao')">üì• Baixar PDF</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'gerador':
                    titulo.textContent = 'üîÑ Gerador de Documentos';
                    html = `
                        <div class="document-body">
                            <div class="form-group">
                                <label>Nome do Benefici√°rio</label>
                                <input type="text" placeholder="Nome completo" style="margin-bottom: 15px;">
                            </div>
                            <div class="form-group">
                                <label>Equipamentos</label>
                                <select style="margin-bottom: 15px;">
                                    <option>Cadeira de Rodas</option>
                                    <option>Muletas</option>
                                    <option>Andador</option>
                                </select>
                            </div>
                            <div class="action-buttons">
                                <button class="btn" onclick="alert('Documento gerado com sucesso!')">üìÑ Gerar Documento</button>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            conteudo.innerHTML = html;
            modal.style.display = 'flex';
        }

        // ========== SISTEMA DE RELAT√ìRIOS ==========
        function atualizarEstatisticas() {
            const totalColetas = coletas.reduce((sum, coleta) => sum + coleta.quantidade, 0);
            const totalParceiros = parceiros.filter(p => p.status === 'ativo').length;
            
            document.getElementById('total-coletas').textContent = totalColetas.toLocaleString();
            document.getElementById('total-parceiros').textContent = totalParceiros;
            document.getElementById('total-equipamentos').textContent = '24';
            document.getElementById('total-co2').textContent = (totalColetas * 0.0546).toFixed(2) + ' kg';
        }

        function gerarRelatorioMensal() {
            alert('üìä Relat√≥rio mensal gerado com sucesso!\n\nDados dispon√≠veis para an√°lise.');
        }

        function exportarDados() {
            const dados = {
                coletas: coletas,
                parceiros: parceiros,
                dataExportacao: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(dados, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ecoeng_dados_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
        }

        function downloadPDF(tipo) {
            alert(`üì• Download do ${tipo === 'comodato' ? 'Termo de Comodato' : 'Ficha de Manuten√ß√£o'} iniciado!`);
        }

        // Event Listeners
        document.getElementById('search').addEventListener('input', carregarParceiros);
        document.getElementById('filter-status').addEventListener('change', carregarParceiros);
        document.getElementById('filter-tipo').addEventListener('change', carregarParceiros);

        // Fechar modais ao clicar fora
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            carregarParceiros();
            carregarColetas();
            atualizarEstatisticas();
        });
    </script>
</body>
</html>
